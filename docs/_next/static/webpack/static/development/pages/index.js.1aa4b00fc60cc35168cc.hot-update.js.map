{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.1aa4b00fc60cc35168cc.hot-update.js","sources":["webpack:///./components/Layout/Layout.js"],"sourcesContent":["import 'what-input';\r\nimport Head from 'next/head';\r\nimport cookie from 'js-cookie';\r\nimport { string, bool } from 'prop-types';\r\n\r\nimport Navigation from '../Navigation';\r\nimport Footer from '../Footer';\r\nimport GDPRBanner from '../GDPRBanner';\r\n\r\nimport './Layout.scss';\r\nimport { Provider } from './Context';\r\nimport JobPostingBanner from \"../JobPostingBanner\";\r\n\r\nexport default class Layout extends React.Component {\r\n  static propTypes = {\r\n    title: string,\r\n    fixed: bool\r\n  }\r\n\r\n  static defaultProps = {\r\n    title: 'nOS - Operating System for the Decentralized Internet',\r\n    fixed: false\r\n  }\r\n\r\n  state = {\r\n    accepted: true,\r\n    downloadUrl: 'https://github.com/nos/client/releases'\r\n  }\r\n\r\n  setDownloadUrl = async () => {\r\n    try {\r\n      const resp = await fetch('https://api.github.com/repos/nos/client/releases/latest');\r\n      const response = await resp.json();\r\n      const assets = response.assets;\r\n\r\n      assets.forEach(asset => {\r\n        const browserDownloadUrl = asset.browser_download_url;\r\n\r\n        if ((browserDownloadUrl.endsWith(\".exe\") && navigator.platform.indexOf('Win') !== -1) || (browserDownloadUrl.endsWith(\".dmg\") && navigator.platform.indexOf('Mac') !== -1) || (browserDownloadUrl.endsWith(\".AppImage\") && navigator.platform.indexOf('Linux') !== -1)) {\r\n          this.setState({downloadUrl: browserDownloadUrl});\r\n        }\r\n      })\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.setDownloadUrl();\r\n\r\n    if (!cookie.get('gdpr')) {\r\n      this.setState({ accepted: false });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Provider value={this.state.downloadUrl}>\r\n        <div>\r\n          <Head>\r\n            <meta charSet=\"utf-8\" />\r\n            <meta httpEquiv=\"x-ua-compatible\" content=\"ie=edge\" />\r\n            <meta name=\"description\" content=\"nOS is the Virtual Operating for the Decentralized Internet. Build, discover, and use Decentralized Applications\" />\r\n            <meta name=\"og:image\" content=\"static/dapps-snapshot.png\" />\r\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\" />\r\n            <link rel=\"shortcut icon\" href=\"static/logo-nos.png\" type=\"image/x-icon\" />\r\n            <title>{this.props.title}</title>\r\n          </Head>\r\n\r\n          <Navigation fixed={this.props.fixed} />\r\n          {this.props.children}\r\n          <Footer />\r\n          {this.renderBanner()}\r\n          {this.renderJobBanner()}\r\n        </div>\r\n      </Provider>\r\n    );\r\n  }\r\n\r\n  renderJobBanner = () => {\r\n    if (this.state.closed) {\r\n      return null;\r\n    }\r\n\r\n    return <JobPostingBanner accepted={this.state.closed} onAccept={this.handleClose} />;\r\n  }\r\n\r\n  renderBanner = () => {\r\n    if (this.state.accepted) {\r\n      return null;\r\n    }\r\n\r\n    return <GDPRBanner accepted={this.state.accepted} onAccept={this.handleAccept} />;\r\n  }\r\n\r\n  handleAccept = () => {\r\n    this.setState({ accepted: true }, () => {\r\n      cookie.set('gdpr', 'true');\r\n    });\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({ closed: true }, () => {});\r\n  }\r\n\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAWA;AACA;AACA;AAFA;AACA;;;;;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAFA;AAAA;AACA;AADA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAZA;AAAA;AACA;AADA;AAAA;AAAA;AAcA;AACA;AAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAiBA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAyBA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;;;;;;AAjDA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;AAhEA;AACA;AADA;AAEA;AACA;AAFA;AACA;AAFA;AAOA;AACA;AAFA;AACA;;;;;A","sourceRoot":""}